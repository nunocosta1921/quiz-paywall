<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teste de QI (entretenimento) ‚Äî 30 perguntas</title>
  <meta name="description" content="30 perguntas r√°pidas. Descobre a tua pontua√ß√£o." />

  <style>
    :root{
      --bg1:#070A18; --bg2:#0B1230;
      --card: rgba(255,255,255,.06);
      --border: rgba(255,255,255,.12);
      --text: #EEF3FF; --muted: rgba(238,243,255,.78);
      --accent:#7C4DFF; --accent2:#2EE7FF;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      min-height:100vh;
      background:
        radial-gradient(1000px 600px at 15% 10%, rgba(124,77,255,.35), transparent 60%),
        radial-gradient(900px 540px at 85% 20%, rgba(46,231,255,.25), transparent 60%),
        radial-gradient(700px 500px at 50% 100%, rgba(73,255,168,.14), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    .top{display:flex;gap:18px;align-items:stretch;flex-wrap:wrap;margin-top:8px}
    .hero{
      flex: 1 1 520px;
      padding:24px;
      border:1px solid var(--border);
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.05));
      box-shadow: var(--shadow);
      position:relative; overflow:hidden;
    }
    .hero:before{
      content:""; position:absolute; inset:-2px;
      background: radial-gradient(600px 220px at 20% 0%, rgba(124,77,255,.35), transparent 60%);
      pointer-events:none;
    }
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 12px;border-radius:999px;
      background: rgba(124,77,255,.18);
      border:1px solid rgba(124,77,255,.35);
      font-weight:600;font-size:13px;letter-spacing:.2px;
      position:relative; z-index:1;
    }
    h1{margin:14px 0 8px;font-size:34px;line-height:1.15;position:relative;z-index:1}
    .sub{color:var(--muted);font-size:15px;line-height:1.55;position:relative;z-index:1}
    .stats{
      flex: 0 0 320px;
      padding:20px;border:1px solid var(--border);border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
      box-shadow: var(--shadow);
    }
    .pillRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 12px;border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      font-size:13px;color:var(--muted);white-space:nowrap;
    }
    .pill strong{color:var(--text);font-weight:800}
    .bar{
      margin-top:14px;height:12px;border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .fill{
      height:100%;width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 0 30px rgba(124,77,255,.35);
      transition: width .35s ease;
    }
    .card{
      margin-top:18px;padding:22px;border-radius:var(--radius);
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
      box-shadow: var(--shadow);
    }
    .q{font-size:18px;margin:0 0 14px}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:820px){.grid{grid-template-columns:1fr 1fr}}
    .btn{
      padding:14px 14px;border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:var(--text);font-size:16px;cursor:pointer;text-align:left;
      transition: transform .08s ease, background .18s ease, border-color .18s ease;
      backdrop-filter: blur(10px);
    }
    .btn:hover{transform: translateY(-1px);background: rgba(255,255,255,.09);border-color: rgba(255,255,255,.22)}
    .hint{margin-top:12px;color:var(--muted);font-size:13px;line-height:1.45}
    .pay{display:none;animation: pop .25s ease}
    @keyframes pop{from{transform:scale(.98);opacity:.7}to{transform:scale(1);opacity:1}}

    .primary{
      width:100%;padding:14px 16px;border-radius:16px;border:0;cursor:pointer;
      font-size:16px;font-weight:900;letter-spacing:.2px;color:#081029;
      background: linear-gradient(90deg, var(--accent2), var(--accent), #FF4D8D);
      box-shadow: 0 18px 40px rgba(124,77,255,.28);
      transition: transform .08s ease, filter .18s ease;
    }
    .primary:hover{transform: translateY(-1px); filter: brightness(1.02)}
    .primary:disabled{opacity:.7; cursor:not-allowed; transform:none}

    .calc{
      display:none;
      padding:14px 16px;border-radius:18px;
      border:1px dashed rgba(255,255,255,.18);
      background: rgba(255,255,255,.05);
      color: var(--muted);
    }
    .spinner{
      width:18px;height:18px;border-radius:50%;
      border:2px solid rgba(255,255,255,.25);
      border-top-color: var(--accent2);
      display:inline-block;
      animation: spin .8s linear infinite;
      vertical-align:-4px;margin-right:10px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .footer{margin:18px 0 6px;color:rgba(238,243,255,.55);font-size:12px;text-align:center}
    .link{color:#BFD5FF}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="hero">
        <div class="badge">‚ö° Teste r√°pido ‚Ä¢ 30 perguntas</div>
        <h1>Descobre a tua <span style="background:linear-gradient(90deg,var(--accent2),var(--accent));-webkit-background-clip:text;background-clip:text;color:transparent">pontua√ß√£o</span> em poucos minutos</h1>
        <div class="sub">
          Responde r√°pido e v√™ o resultado no final.
          <br><span style="opacity:.75">* Entretenimento (n√£o √© teste cl√≠nico).</span>
        </div>

        <div class="pillRow">
          <div class="pill">üß† <strong>30</strong> perguntas</div>
          <div class="pill">‚è±Ô∏è <strong>4‚Äì7</strong> minutos</div>
          <div class="pill">üéØ Foco: <strong>padr√µes + l√≥gica</strong></div>
        </div>
      </div>

      <div class="stats">
        <div style="font-weight:900;font-size:14px;letter-spacing:.2px">Progresso</div>

        <div class="pillRow" style="margin-top:10px">
          <div class="pill" id="pillProgress">Pergunta <strong>1</strong>/30</div>
          <div class="pill" id="pillScore">Pontua√ß√£o <strong>0</strong></div>
        </div>

        <div class="bar"><div class="fill" id="fill"></div></div>

        <div class="hint" style="margin-top:14px">
          Dica: n√£o fiques preso numa pergunta. O objetivo √© ser r√°pido e consistente.
        </div>
      </div>
    </div>

    <!-- QUIZ -->
    <div class="card" id="quizCard">
      <div class="q" id="question"></div>
      <div class="grid" id="answers"></div>
      <div class="hint">Escolhe a op√ß√£o mais correta. No final mostramos o resultado.</div>
    </div>

    <!-- CALCULATING -->
    <div class="card calc" id="calcCard">
      <div><span class="spinner"></span><strong>A calcular o teu resultado‚Ä¶</strong></div>
      <div class="hint" style="margin-top:6px">A preparar o relat√≥rio final.</div>
    </div>

    <!-- PAYWALL -->
    <div class="card pay" id="payCard">
      <h2 style="margin:0 0 8px">Resultado pronto ‚úÖ</h2>
      <div class="sub">O teu relat√≥rio est√° preparado.</div>
      <div style="margin-top:14px">
        <button class="primary" id="payBtn">Desbloquear resultado</button>
      </div>
      <div class="hint" style="margin-top:10px">
        <a class="link" href="/" onclick="localStorage.removeItem('quizToken')">Refazer teste</a>
      </div>
    </div>

    <div class="footer">
      * Este teste √© apenas para entretenimento. N√£o √© diagn√≥stico, nem teste cl√≠nico real.
    </div>
  </div>

<script>
  const quiz = [
    {q:"1) 2,4,8,16, ?",o:["18","24","32","34"],c:2},
    {q:"2) 5,10,20,40, ?",o:["60","70","80","90"],c:2},
    {q:"3) 1,1,2,3,5,8, ?",o:["11","12","13","15"],c:2},
    {q:"4) 9,7,5,3, ?",o:["2","1","0","-1"],c:1},
    {q:"5) 3,6,12,24, ?",o:["30","36","48","60"],c:2},
    {q:"6) 15% de 200?",o:["15","20","30","40"],c:2},
    {q:"7) 12x = 60 ‚Üí x =",o:["3","4","5","6"],c:2},
    {q:"8) 25% de 80?",o:["10","15","20","25"],c:2},
    {q:"9) M√©dia de 6,10,14?",o:["9","10","11","12"],c:1},
    {q:"10) 3x + 5 = 20",o:["3","4","5","6"],c:1},

    {q:"11) Palavra diferente:",o:["Ma√ß√£","Banana","Cenoura","Pera"],c:2},
    {q:"12) Anagrama de ROMA:",o:["AMOR","MORA","RAMO","Todas"],c:3},
    {q:"13) Tri√¢ngulo tem 3 lados. Hex√°gono?",o:["5","6","7","8"],c:1},
    {q:"14) Se todos A s√£o B e alguns B s√£o C:",o:["Alguns C s√£o A","Todos C s√£o A","Nenhum C √© A","N√£o sabemos"],c:3},
    {q:"15) Ordem alfab√©tica correta:",o:["Casa,C√£o","C√£o,Casa","Casa,Catar","Catar,Casa"],c:2},

    {q:"16) 0,9 vs 0,99 qual maior?",o:["0,9","0,90","0,909","0,99"],c:3},
    {q:"17) 4 pessoas fazem trabalho em 12 dias. 6 fazem em:",o:["6","8","10","12"],c:1},
    {q:"18) 12‚Ç¨ com 20% desconto. Original?",o:["14","15","16","18"],c:1},
    {q:"19) 7¬≤ =",o:["42","47","49","52"],c:2},
    {q:"20) 144 √∑ 12 =",o:["10","11","12","13"],c:2},

    {q:"21) Pr√≥ximo: 1,4,9,16, ?",o:["20","24","25","30"],c:2},
    {q:"22) 2¬≥ =",o:["6","8","10","12"],c:1},
    {q:"23) 100 √∑ 4 =",o:["20","22","24","25"],c:3},
    {q:"24) N√∫mero primo:",o:["9","15","17","21"],c:2},
    {q:"25) 8 x 7 =",o:["54","56","58","60"],c:1},

    {q:"26) 5! =",o:["20","60","120","240"],c:2},
    {q:"27) √Çngulo reto tem:",o:["45¬∞","60¬∞","90¬∞","180¬∞"],c:2},
    {q:"28) 11 x 11 =",o:["111","121","131","141"],c:1},
    {q:"29) 1/2 de 1/2 =",o:["1/2","1/3","1/4","1/5"],c:2},
    {q:"30) 1000 - 333 =",o:["667","677","687","697"],c:0},
  ];

  let i = 0;
  let score = 0;

  const quizCard = document.getElementById("quizCard");
  const payCard = document.getElementById("payCard");
  const calcCard = document.getElementById("calcCard");

  const qEl = document.getElementById("question");
  const ansEl = document.getElementById("answers");

  const pillProgress = document.getElementById("pillProgress");
  const pillScore = document.getElementById("pillScore");
  const fill = document.getElementById("fill");
  const payBtn = document.getElementById("payBtn");

  function updateUI(){
    pillProgress.innerHTML = `Pergunta <strong>${Math.min(i+1, quiz.length)}</strong>/${quiz.length}`;
    pillScore.innerHTML = `Pontua√ß√£o <strong>${score}</strong>`;
    fill.style.width = `${(i/quiz.length)*100}%`;
  }

  function render(){
    updateUI();
    const item = quiz[i];
    qEl.textContent = item.q;
    ansEl.innerHTML = "";

    item.o.forEach((opt, idx)=>{
      const b = document.createElement("button");
      b.className = "btn";
      b.textContent = opt;
      b.onclick = ()=>{
        if(idx === item.c) score++;
        i++;
        if(i >= quiz.length) finish();
        else render();
      };
      ansEl.appendChild(b);
    });
  }

  function finish(){
    fill.style.width = "100%";
    quizCard.style.display = "none";
    calcCard.style.display = "block";

    const quizToken = `T_${Date.now()}_${Math.random().toString(16).slice(2)}`;
    localStorage.setItem("quizToken", quizToken);

    setTimeout(()=>{
      calcCard.style.display = "none";
      payCard.style.display = "block";

      payBtn.onclick = async ()=>{
        payBtn.disabled = true;
        payBtn.textContent = "A abrir‚Ä¶";

        const resp = await fetch("/create-checkout-session",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({ quizToken, score })
        });

        const data = await resp.json();
        if(data.url) window.location = data.url;

        payBtn.disabled = false;
        payBtn.textContent = "Desbloquear resultado";
      };
    }, 900);
  }

  render();
</script>
</body>
</html>